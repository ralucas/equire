// Generated by CoffeeScript 1.8.0
(function() {
  var colorRandomizer;

  $(function() {});

  colorRandomizer = function() {
    var colors, i, output, _i, _len, _ref;
    output = [];
    colors = '';
    _ref = 3;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      i = _ref[_i];
      output.push(Math.floor(Math.random() * 255));
    }
    colors = output.join(',');
    return 'rgb(' + colors + ')';
  };

  $.get('/pieChart', function(data) {
    var pieData, seriesData, values;
    pieData = [];
    values = [];
    seriesData = _.pairs(data);
    return $('#pieChart').highcharts({
      chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false
      },
      title: {
        text: 'Requests by User'
      },
      plotOptions: {
        pie: {
          allowPointSelect: true,
          cursor: 'pointer',
          dataLabels: {
            enabled: true,
            color: '#000000',
            connectorColor: '#000000',
            formatter: function() {
              return '<b>' + this.point.name + '</b>: ' + this.y;
            }
          }
        }
      },
      series: [
        {
          type: 'pie',
          name: 'Requests',
          data: seriesData
        }
      ]
    });
  });

  $.get('/lineChart', function(data) {
    var columnData, ctx, days, each, lineData, line_options, newLineChart, obj, value, values;
    columnData = [];
    days = [];
    values = [];
    for (each in data) {
      value = data[each];
      values.push(value);
      days.push(each);
      obj = {
        name: each,
        data: [value]
      };
      columnData.push(obj);
    }
    $('#columnChart').highcharts({
      chart: {
        type: 'column'
      },
      title: {
        text: 'Requests by Days of the Week'
      },
      xAxis: {
        title: {
          text: 'Days of the Week'
        }
      },
      yAxis: {
        title: {
          text: 'Requests'
        },
        tickInterval: 1
      },
      series: columnData
    });
    lineData = {
      labels: days,
      datasets: [
        {
          fillColor: "rgba(151,187,205,0.5)",
          strokeColor: "rgba(151,187,205,1)",
          pointColor: "rgba(151,187,205,1)",
          pointStrokeColor: "#fff",
          data: values
        }
      ]
    };
    line_options = {
      scaleStartValue: 0
    };
    ctx = $("#lineChart").get(0).getContext("2d");
    return newLineChart = new Chart(ctx).Line(lineData, line_options);
  });

}).call(this);
